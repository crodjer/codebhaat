{% extends 'base.html' %}
{% load cache %}
{% load problem_tags %}
{% block content_heading %}<a href={% url contest_list %}>Contest</a> > {{ contest }}{% endblock %}
{% block content %}
<div id="sidebar">
	<h3>Tag Cloud</h3>
    {% tag_cloud %}
  <br/>
  <h3>Your stats:</h3>
    Total Marks: <b>{{ total_marks }}</b>
    <br/>
    <h3>Correct Submissions</h3>
    <table>
    	<thead>
    		<tr>
    			<th>Coder</th><th>Problem</th><th>Lang</th><th></th>
    		</tr>
    	</thead>
    	<tbody>
  		{% for submission in submissions %}
  		{% if submission.correct %}
    		<tr>
    			<td>{% if user.get_profile %}<a href="{% url profiles_profile_detail submission.user %}">{{ submission.user }}</a>{% else %}{{ submission.user }}{% endif %}</td><td><a href="{{ submission.problem.get_absolute_url }}">{{ submission.problem|truncatewords:2}}</a></td><td>{{ submission.language|title }}</td><td>{{ submission.time|timesince }} ago</td>
    		</tr>
    	{% endif %}
    	{% empty %}
    		<tr>
            <td>No submissions</td><td></td><td></td><td></td><td></td>
    		</tr>
    	{% endfor %}
    	</tbody>
    </table>    
</div>
<div class="entry" style="width:400px;">
        
    {% regroup problems|dictsort:"level" by get_level_display as level_list %}
    {% for level in level_list %}
    <h3>{{ level.grouper }}</h3>
    {% for p in level.list %}
    <table style="min-width:400px">
        <tr><td><a href="{% url problem_detail contest.pk p.pk %}">{{ p.title }}</a> ({{ p.total_marks }} marks)</td><td width="20px"><img src="/media/admin/img/admin/{{ p.status_img }}"/></td></tr>
    </table>             
    {% endfor %}
    {% empty %}
        No problems are available.        
    {% endfor %}
</div>
{% endblock %}
{% block sidebar %}
{% endblock %}
